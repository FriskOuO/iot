# 🎮 遊戲操作指南

## 快速開始

### 啟動遊戲
```bash
npm start
```

## 🎯 遊戲流程

### 第一步：開始遊戲
- 場景：停車場
- 點擊 **[進入車內]** 按鈕

### 第二步：準備啟動引擎
- 場景：車內
- 點擊 **[啟動引擎]** 按鈕

### 第三步：QTE挑戰 ⚡
- **重要！** 這是遊戲的核心挑戰
- 螢幕會顯示 4 個隨機方向鍵序列
- 快速按下對應的方向鍵：↑ ↓ ← →
- 成功：引擎啟動，進入駕駛模式
- 失敗：引擎熄火，點擊 **[再試一次]** 重新挑戰

### 第四步：駕駛
- 自動播放動畫
- 觀察右側面板的距離感測器
- 距離從 500cm → 50cm

### 第五步：到達閘門
- 場景：停車柵欄前
- 點擊 **[開啟閘門]** 按鈕
- 觀察 IoT 協議日誌（MQTT、CoAP）

### 第六步：停車
- 點擊 **[停車]** 按鈕
- 任務完成！

### 重新開始
- 點擊 **[重新開始]** 按鈕

## 📊 右側面板說明

### 系統狀態
- 顯示當前遊戲狀態
- 即時時間戳記

### HC-SR04 超聲波感測器
- 顯示與障礙物的距離（cm）
- 進度條視覺化
- 顏色變化：綠色 → 黃色 → 橙色 → 紅色

### 協議日誌
- 🎮 **System**: 系統事件
- 📡 **MQTT**: 訊息佇列遙測傳輸
- 📦 **CoAP**: 受限應用協議
- 📏 **Sensor**: 感測器讀數
- 🎯 **QTE**: 快速反應事件
- ✅ **Action**: 玩家選擇
- 🎉 **Success**: 成功事件
- 💀 **Fail**: 失敗事件
- 💾 **SQL**: 資料庫操作

## 🎮 QTE 技巧

### 最佳策略
1. **先記住序列**：不要急著按，先看完整個序列
2. **保持專注**：QTE 期間全螢幕會顯示序列
3. **快速反應**：按下正確的方向鍵
4. **不要緊張**：失敗可以重試

### 視覺提示
- **灰色方塊**：尚未到達
- **黃色方塊（跳動）**：當前需要按的鍵
- **綠色方塊（縮小）**：已成功按下

## 🔧 技術細節

### 狀態機流程
```
開始 → 車內 → QTE挑戰 → 駕駛 → 閘門前 → 閘門開啟 → 停車完成
                ↓（失敗）
            引擎熄火（可重試）
```

### IoT 模擬
- **MQTT**: 發布車輛運動事件
- **CoAP**: 發送閘門控制指令
- **HC-SR04**: 超聲波距離感測器
- **Digital Twin**: 即時同步虛擬與物理狀態

## 🎨 UI 特色

### 復古 RPG 風格
- 像素藝術字體選項
- CRT 掃描線效果
- 黃色邊框對話框
- 打字機文字效果

### 動畫效果
- 角色緩慢跳動
- QTE 按鈕脈動
- 日誌自動滾動
- 進度條平滑過渡

## 🐛 常見問題

### Q: 方向鍵沒反應？
A: 確保遊戲視窗已聚焦（點擊一下畫面）

### Q: QTE 太快了？
A: 目前沒有時間限制，慢慢按也可以

### Q: 距離沒有變化？
A: 只有在「駕駛」狀態才會更新距離

### Q: 如何加快遊戲速度？
A: 修改 `visualNovelMachine.js` 中的距離更新間隔

## 📱 瀏覽器支援

- ✅ Chrome (推薦)
- ✅ Firefox
- ✅ Edge
- ✅ Safari

## 🎓 學習重點

這個專案展示了：
1. ✅ XState v5 狀態機
2. ✅ React 自訂 Hooks
3. ✅ IoT 概念（MQTT、CoAP）
4. ✅ 遊戲設計模式（QTE）
5. ✅ Tailwind CSS 快速開發
6. ✅ Digital Twin 架構

---

**祝遊戲愉快！🎉**
